<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="fragment/head :: head"></head>
<body class="vertical  light  ">
<div class="wrapper">
    <div th:include="fragment/navbar :: navbar"></div>
    <div th:include="fragment/sidebar :: sidebar"></div>
    <main role="main" class="main-content">
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="col-12">
                    <h2 class="mb-2 page-title">Quản lý hóa đơn</h2>
                    <p class="card-text"></p>
                    <div class="row my-4">
                        <!-- Small table -->
                        <div class="col-md-12">
                            <div class="card shadow">
                                <div class="card-body">
                                    <div class="toolbar row mb-3">
                                        <div class="col">
                                            <form class="form-inline">
                                                <div class="form-row">
                                                    <div class="form-group col-auto mr-auto">
                                                        <label class="my-1 mr-2 sr-only"
                                                               for="inlineFormCustomSelectPref1">Show</label>
                                                        <select class="custom-select mr-sm-2"
                                                                id="inlineFormCustomSelectPref1">
                                                            <option value="">...</option>
                                                            <option value="1">12</option>
                                                            <option value="2" selected>32</option>
                                                            <option value="3">64</option>
                                                            <option value="3">128</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-auto">
                                                        <label for="search" class="sr-only">Search</label>
                                                        <input type="text" class="form-control" id="search" value=""
                                                               placeholder="Search">
                                                    </div>
                                                    <div class="form-group col-auto ml-3">
                                                        <label class="my-1 mr-2 sr-only"
                                                               for="inlineFormCustomSelectPref">Status</label>
                                                        <select class="custom-select my-1 mr-sm-2"
                                                                id="inlineFormCustomSelectPref">
                                                            <option selected>Trạng thái</option>
                                                            <option value="1">Hoạt động</option>
                                                            <option value="2">Kết thúc</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="col ml-auto">
                                            <div class="dropdown float-right">
                                                <button class="btn btn-primary float-right ml-3" type="button">Add
                                                    +
                                                </button>
                                                <button class="btn btn-secondary dropdown-toggle" type="button"
                                                        id="actionMenuButton" data-toggle="dropdown"
                                                        aria-haspopup="true" aria-expanded="false"> Hành động
                                                </button>
                                                <div class="dropdown-menu" aria-labelledby="actionMenuButton">
                                                    <a class="dropdown-item" href="#">Export</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- table -->
                                    <table class="table datatables" id="dataTable-1">
                                        <thead>
                                        <tr >
                                            <th></th>
                                            <th>STT</th>
                                            <th>Mã hóa đơn</th>
                                            <th>Tên khách hàng</th>
                                            <th>Ngày tạo</th>
                                            <th>Tổng tiền</th>
                                            <th>Trạng thái</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="hd,i:${listHD}">
                                            <td>
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" th:id="${'checkbox-' + (number + i.index + 1)}">
                                                    <label class="custom-control-label" th:for="${'checkbox-' + (number + i.index + 1)}"></label>
                                                </div>
                                            </td>
                                            <td th:text="${number + i.index + 1}"></td>
                                            <td th:text="${hd.content.maHoaDon}"></td>
                                            <td th:text="${hd.content.hoVaTenKhachHang}"></td>
                                            <td th:text="${#dates.format(hd.content.ngayTao, 'dd/MM/yyyy')}"></td>
                                            <td th:text="${hd.content.tongTien}"></td>
                                            <td th:text="${hd.content.trangThai}"></td>
                                            <td style="display: flex">
                                                <button class="btn mb-2 mr-1 btn-warning" data-bs-toggle="modal"
                                                        th:data-bs-target="'#detailModal' + ${hd.content.id}">
                                                    <span class="fe fe-eye"></span>
                                                </button>
                                                <button class="btn mb-2 ml-1 btn-danger" type="button">
                                                    <span class="fe fe-trash-2"></span>
                                                </button>
                                                <nav class="vertnav navbar navbar-light">
                                                    <ul class="navbar-nav flex-fill w-100 mb-2">
                                                        <li class="nav-item dropdown">
                                                            <a th:href="'#dashboard-' + ${hd != null && hd.content != null ? hd.content.id : ''}" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle nav-link">
                                                                <span class="ml-3 item-text">Dashboard</span>
                                                                <span class="sr-only">(current)</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </nav>

                                            </td>

                                            <!-- Modal -->
                                            <div class="modal fade" th:id="'detailModal' + ${hd.content.id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="max-width: 50%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Chi tiết hóa đơn</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form>
                                                                <div class="form-group">
                                                                    <label for="tenKhachHang">Tên khách hàng:</label>
                                                                    <input type="text" class="form-control" id="tenKhachHang" th:value="${hd.content.hoVaTenKhachHang}" readonly>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="tenNhanVien">Tên nhân viên:</label>
                                                                    <input type="text" class="form-control" id="tenNhanVien" th:value="${hd.content.idNhanVien}" readonly>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="ngayTao">Ngày tạo:</label>
                                                                    <input type="text" class="form-control" id="ngayTao" th:value="${#dates.format(hd.content.ngayTao, 'dd/MM/yyyy')}" readonly>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="tongTien">Tổng tiền:</label>
                                                                    <input type="text" class="form-control" id="tongTien" th:value="${hd.content.tongTien}" readonly>
                                                                </div>
                                                                <div class="form-row">
                                                                    <div class="form-group col-md-4">
                                                                        <label for="tienCoc">Tiền cọc</label>
                                                                        <input type="number" class="form-control" id="tienCoc" th:value="${hd.content.tienCoc}" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label for="tienConLai">Tiền còn lại</label>
                                                                        <input type="number" class="form-control" id="tienConLai" th:value="${hd.content.tienConLai}" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label for="tienThua">Tiền thừa</label>
                                                                        <input type="number" class="form-control" id="tienThua" th:value="${hd.content.tienThua}" readonly>
                                                                    </div>
                                                                </div>
                                                                <div class="form-row">
                                                                    <div class="form-group col-md-6">
                                                                        <label for="ngayDenSan">Ngày đến sân</label>
                                                                        <input type="text" class="form-control" id="ngayDenSan" th:value="${#dates.format(hd.content.ngayDenSan, 'dd/MM/yyyy')}" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-6">
                                                                        <label for="ngayThanhToan">Ngày thanh toán</label>
                                                                        <input type="text" class="form-control" id="ngayThanhToan" th:value="${#dates.format(hd.content.ngayThanhToan, 'dd/MM/yyyy')}" readonly>
                                                                    </div>
                                                                </div>
                                                                <!-- Thêm các trường thông tin khác của hóa đơn tại đây -->
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </tr>
                                        </tbody>



                                    </table>

                                    <tr th:each="hd,i:${listHD}">
                                        <ul class="collapse list-unstyled pl-4 w-100" th:id="'dashboard-' + ${hd != null && hd.content != null ? hd.content.id : ''}">
                                            <li class="nav-item active">
                                                <a class="nav-link pl-3" href="#"><span class="ml-1 item-text">Default</span></a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link pl-3" href="#"><span class="ml-1 item-text">Analytics</span></a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link pl-3" href="#"><span class="ml-1 item-text">E-commerce</span></a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link pl-3" href="#"><span class="ml-1 item-text">Saas Dashboard</span></a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link pl-3" href="#"><span class="ml-1 item-text">Systems</span></a>
                                            </li>
                                        </ul>
                                    </tr>

                                    <nav aria-label="Table Paging" class="mb-0 text-muted">
                                        <ul class="pagination justify-content-end mb-0">
                                            <li class="page-item"
                                                th:classappend="${currentPage == 0} ? 'disabled' : ''">
                                                <a class="page-link" th:href="@{/web-hoa-don(page=${currentPage - 1})}">Previous</a>
                                            </li>
                                            <li class="page-item"
                                                th:each="pageNumber : ${#numbers.sequence(0, listHD.metadata.totalPages - 1)}"
                                                th:classappend="${currentPage == pageNumber} ? 'active' : ''">
                                                <a class="page-link" th:href="@{/web-hoa-don(page=${pageNumber})}"
                                                   th:text="${pageNumber + 1}">1</a>
                                            </li>
                                            <li class="page-item"
                                                th:classappend="${currentPage == listHD.metadata.totalPages - 1} ? 'disabled' : ''">
                                                <a class="page-link"
                                                   th:href="@{/web-hoa-don(page=${currentPage + 1})}">Next</a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div> <!-- simple table -->
                    </div> <!-- end section -->
                </div> <!-- .col-12 -->
            </div> <!-- .row -->

        </div> <!-- .container-fluid -->
        <div th:include="fragment/modal :: modal"></div>
    </main>
</div>
</body>
<div th:include="fragment/script :: script"></div>
</html>
