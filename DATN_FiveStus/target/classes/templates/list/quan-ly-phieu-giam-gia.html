<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{fragment/head :: head}"></head>
<body class="vertical  light  ">
<div class="wrapper">
    <div th:insert="~{fragment/navbar :: navbar}"></div>
    <div th:insert="~{fragment/sidebar :: sidebar}"></div>
    <main role="main" class="main-content">
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="col-12">
                    <h2 class="mb-2 page-title">Quản lý phiếu giảm giá</h2>
                    <p class="card-text"></p>
                    <div class="row my-4">
                        <!-- Small table -->
                        <div class="col-md-12">
                            <div class="card shadow">
                                <div class="card-body">
                                    <div class="toolbar row mb-3">
                                        <div class="col">
                                            <form class="form-inline">
                                                <div class="form-row">
                                                    <div class="form-group col-auto mr-auto">
                                                        <label class="my-1 mr-2 sr-only"
                                                               for="inlineFormCustomSelectPref1">Show</label>
                                                        <select class="custom-select mr-sm-2"
                                                                id="inlineFormCustomSelectPref1">
                                                            <option value="">...</option>
                                                            <option value="1">12</option>
                                                            <option value="2" selected>32</option>
                                                            <option value="3">64</option>
                                                            <option value="3">128</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-auto">
                                                        <label for="search" class="sr-only">Search</label>
                                                        <input type="text" class="form-control" id="search" value=""
                                                               placeholder="Search">
                                                    </div>
                                                    <div class="form-group col-auto ml-3">
                                                        <label class="my-1 mr-2 sr-only"
                                                               for="inlineFormCustomSelectPref">Status</label>
                                                        <select class="custom-select my-1 mr-sm-2"
                                                                id="inlineFormCustomSelectPref">
                                                            <option selected>Trạng thái</option>
                                                            <option value="1">Hoạt động</option>
                                                            <option value="2">Kết thúc</option>
                                                            <option value="3">Hold</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <!-- Form Add-->
                                        <div class="col ml-auto">
                                            <div class="dropdown float-right">
                                                <button type="button" class="btn btn-primary float-right ml-3"
                                                        data-toggle="modal" data-target="#varyModal"
                                                        data-whatever="@mdo">Thêm<span class="fe fe-plus "></span>
                                                </button>
                                                <div class="modal fade" id="varyModal" tabindex="-1" role="dialog"
                                                     aria-labelledby="varyModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h5 class="modal-title" id="varyModalLabel">
                                                                    Thêm phiếu giảm giá</h5>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                        aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                            <form th:object="${pgg}" th:action="@{/save-pgg}"
                                                                  th:method="post">
                                                                <div class="modal-body">
                                                                    <div class="form-row">
                                                                        <div class="form-group col-md-6">
                                                                            <label>
                                                                                Mã phiếu giảm giá
                                                                            </label>
                                                                            <input type="text" class="form-control"
                                                                                   placeholder="Ma"
                                                                                   th:field="*{maPhieuGiamGia}">
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <label>Tên phiếu giảm giá</label>
                                                                            <input type="text" class="form-control"
                                                                                   placeholder="Tên"
                                                                                   th:field="*{tenPhieuGiamGia}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-row">
                                                                        <div class="form-group col-md-12">
                                                                            <label>Khách hàng</label>
                                                                            <select th:field="*{idKhachHang}"
                                                                                    class="form-control">
                                                                                <option th:each="pggItem : ${listFull}"
                                                                                        th:value="${pggItem.idKhachHang}"
                                                                                        th:text="${pggItem.hoVaTenKhachHang}">
                                                                                </option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-row">
                                                                        <div class="form-group col-md-12">
                                                                            <label>Mức giảm</label>
                                                                            <input type="text" class="form-control"
                                                                                   placeholder="Mức giảm"
                                                                                   th:field="*{mucGiam}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-row">
                                                                        <div class="form-group col-md-6">
                                                                            <label for="hinhThucGiamGia">Hình thức giảm
                                                                                giá</label>
                                                                            <select id="hinhThucGiamGia"
                                                                                    class="form-control"
                                                                                    th:field="*{hinhThucGiamGia}">
                                                                                <option selected th:value="true">Giảm
                                                                                    theo số tiền
                                                                                </option>
                                                                                <option th:value="false">Giảm theo %
                                                                                </option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <label for="dieuKienSuDung">Điều kiện sử
                                                                                dụng</label>
                                                                            <select id="dieuKienSuDung"
                                                                                    th:field="*{dieuKienSuDung}"
                                                                                    class="form-control">
                                                                                <option th:each="dieuKienSuDung:${listDKSD}"
                                                                                        th:value="${dieuKienSuDung}"
                                                                                        th:text="${dieuKienSuDung}"
                                                                                ></option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-row">
                                                                        <div class="form-group col-md-6">
                                                                            <label>Ngày bắt đầu</label>
                                                                            <input type="date" class="form-control"
                                                                                   placeholder="Ngày bắt đầu"
                                                                                   th:field="*{ngayBatDau}">
                                                                        </div>
                                                                        <div class="form-group col-md-6">
                                                                            <label>Ngày kết thúc</label>
                                                                            <input type="date" class="form-control"
                                                                                   placeholder="Ngày kết thúc"
                                                                                   th:field="*{ngayKetThuc}">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn mb-2 btn-secondary"
                                                                            data-dismiss="modal">Close
                                                                    </button>
                                                                    <button type="submit" class="btn mb-2 btn-primary">
                                                                        Submit
                                                                    </button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button class="btn btn-secondary dropdown-toggle" type="button"
                                                        id="actionMenuButton" data-toggle="dropdown"
                                                        aria-haspopup="true" aria-expanded="false"> Hành động
                                                </button>
                                                <div class="dropdown-menu" aria-labelledby="actionMenuButton">
                                                    <a class="dropdown-item" href="#">Export</a> <a
                                                        class="dropdown-item" href="#">Something else here</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Table -->
                                    <table class="table datatables" id="dataTable-1">
                                        <thead>
                                        <tr>
                                            <th></th>
                                            <th>STT</th>
                                            <th>Mã</th>
                                            <th>Tên</th>
                                            <th>Mức giảm</th>
                                            <th>Hình thức giảm</th>
                                            <th>Điều kiện sử dụng</th>
                                            <th>Ngày bắt đầu</th>
                                            <th>Ngày kết thúc</th>
                                            <th>Trạng thái</th>
                                            <th>Hành động</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="pgg,i:${listPGG}">
                                            <div th:if="${pgg.content.deletedAt == false}">
                                                <td>
                                                    <div class="custom-control custom-checkbox">
                                                        <input type="checkbox" class="custom-control-input"
                                                               th:id="${pgg.content.id}">
                                                        <label class="custom-control-label"
                                                               th:for="${pgg.content.id}"></label>
                                                    </div>
                                                </td>
                                                <td th:text="${number + i.index + 1}"></td>
                                                <td th:text="${pgg.content.maPhieuGiamGia}"></td>
                                                <td th:text="${pgg.content.tenPhieuGiamGia}"></td>
                                                <td th:text="${pgg.content.mucGiam}"></td>
                                                <td th:text="${pgg.content.hinhThucGiamGia == false
                                                    ? 'Giảm theo số tiền':'Giảm theo %'}"></td>
                                                <td th:text="${pgg.content.dieuKienSuDung}"></td>
                                                <td th:text="${#dates.format(pgg.content.ngayBatDau, 'dd/MM/yyyy')}"></td>
                                                <td th:text="${#dates.format(pgg.content.ngayKetThuc, 'dd/MM/yyyy')}"></td>
                                                <td>
                                                    <div class="custom-control custom-switch">
                                                        <input type="checkbox" class="custom-control-input"
                                                               th:id="'switch-' + ${pgg.content.id}"
                                                               th:checked="${pgg.content.trangThai == true }" disabled>
                                                        <label class="custom-control-label"
                                                               th:for="'switch-' + ${pgg.content.id}" disabled></label>
                                                    </div>
                                                </td>
                                                <td style="display: flex">
                                                    <button class="btn mb-2 mr-1 btn-warning" type="button">
                                                        <span class="fe fe-edit-3"></span>
                                                    </button>
                                                    <form th:action="@{/remove-pgg/{id}(id=${pgg.content.id})}">
                                                        <button class="btn mb-2 ml-1 btn-danger" type="submit">
                                                            <span class="fe fe-trash-2"></span>
                                                        </button>
                                                    </form>
                                                </td>
                                            </div>
                                            <td>
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input"
                                                           th:id="${number + i.index + 1}">
                                                    <label class="custom-control-label"
                                                           th:for="${number + i.index + 1}"></label>
                                                </div>
                                            </td>
                                            <td th:text="${number + i.index + 1}"></td>
                                            <td th:text="${pgg.content.maPhieuGiamGia}"></td>
                                            <td th:text="${pgg.content.tenPhieuGiamGia}"></td>
                                            <td th:text="${pgg.content.mucGiam}"></td>
                                            <td th:text="${pgg.content.hinhThucGiamGia == false ? 'Giảm theo số tiền':'Giảm theo %'}"></td>
                                            <td th:text="${pgg.content.dieuKienSuDung}"></td>
                                            <td th:text="${#dates.format(pgg.content.ngayBatDau, 'dd/MM/yyyy')}"></td>
                                            <td th:text="${#dates.format(pgg.content.ngayKetThuc, 'dd/MM/yyyy')}"></td>
                                            <td>
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input"
                                                           th:id="'switch-' + ${number + i.index + 1}"
                                                           th:checked="${pgg.content.trangThai == true }">
                                                    <label class="custom-control-label"
                                                           th:for="'switch-' + ${number + i.index + 1}"></label>
                                                </div>
                                            </td>
                                            <td style="display: flex">
                                                <button class="btn mb-2 mr-1 btn-warning" type="button">
                                                    <span class="fe fe-edit-3"></span>
                                                </button>
                                                <button class="btn mb-2 ml-1 btn-danger" type="button">
                                                    <span class="fe fe-trash-2"></span>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <!-- Phân trang -->
                                    <nav aria-label="Table Paging" class="mb-0 text-muted">
                                        <ul class="pagination justify-content-end mb-0">
                                            <li class="page-item"
                                                th:classappend="${currentPage == 0} ? 'disabled' : ''">
                                                <a class="page-link"
                                                   th:href="@{/phieu-giam-gia(page=${currentPage - 1})}">Previous</a>
                                            </li>
                                            <li class="page-item"
                                                th:each="pageNumber : ${#numbers.sequence(0, listPGG.metadata.totalPages - 1)}"
                                                th:classappend="${currentPage == pageNumber} ? 'active' : ''">
                                                <a class="page-link" th:href="@{/phieu-giam-gia(page=${pageNumber})}"
                                                   th:text="${pageNumber + 1}">1</a>
                                            </li>
                                            <li class="page-item"
                                                th:classappend="${currentPage == listPGG.metadata.totalPages - 1} ? 'disabled' : ''">
                                                <a class="page-link"
                                                   th:href="@{/phieu-giam-gia(page=${currentPage + 1})}">Next</a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div> <!-- simple table -->
                    </div> <!-- end section -->
                </div> <!-- .col-12 -->
            </div> <!-- .row -->

        </div> <!-- .container-fluid -->
        <div th:insert="~{fragment/modal :: modal}"></div>
    </main>
</div>
</body>
<div th:insert="~{fragment/script :: script}"></div>

</html>